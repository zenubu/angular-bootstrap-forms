!function(){"use strict";angular.module("zenubu.input",["ui.select","zenubu.input.passwordVerify","zenubu.input.validatorRegex"])}(),angular.module("zenubu.input").run(["$templateCache",function(e){e.put("zenubu.input/zenubuForm.tpl.html",'<form name="Form" ng-submit="submit()" novalidate>\n\n    <div ng-transclude></div>\n\n</form>'),e.put("zenubu.input/zenubuInput.tpl.html",'<ng-form name="innerForm">\n    <div ng-class="{\'has-error\' : hasError()}" class="form-group has-feedback">\n        <label ng-if="hasLabel">{{label}}</label>\n        <div ng-class="{\'input-group\' : inputGroup}">\n            <input type="{{validation.type}}" class="form-control" name="input" ng-class="{\'input-lg\': large}"\n                   ng-if="!sameAs"\n                   ng-trim="false" ng-model="model[field]"\n                   ng-maxlength="{{validation.maxLength}}" ng-minlength="{{validation.minLength}}"\n                   ng-change="change"\n                   validator-regex="{{validation.regex.pattern}}"\n                   max="{{validation.max}}" min="{{validation.min}}" ng-required="{{validation.required}}"\n                   placeholder="{{ placeholder |translate }}">\n            <input type="{{validation.type}}" class="form-control" name="input"\n                   ng-if="!!sameAs"\n                   ng-change="change"\n                   ng-trim="false" ng-model="model[field]"\n                   password-verify="model[sameAs]"\n                   ng-maxlength="{{validation.maxLength}}" ng-minlength="{{validation.minLength}}"\n                   max="{{validation.max}}" min="{{validation.min}}" ng-required="validation.required"\n                   placeholder="{{ placeholder |translate }}">\n            <span class="fa fa-fw fa-asterisk single-input-feedback" ng-class="{\'text-danger\' : hasError(), \'has-label\': hasLabel}"\n                  ng-if="validation.required" focus-input></span>\n        </div>\n        <p ng-if="hasError()" class="help-block">\n            <label class="control-label">\n                <span ng-show="innerForm.input.$error.validatorRegex">{{ validation.regex.error | translate }}</br></span>\n                <span ng-show="innerForm.input.$error.email">{{ \'EMAIL_ERROR\' | translate }}</br></span>\n                <span ng-show="innerForm.input.$error.number">{{ \'NUMBER_ERROR\' | translate }}</br></span>\n                <span ng-show="innerForm.input.$error.required">{{ \'REQUIRED_ERROR\' | translate }}</br></span>\n                <span ng-show="innerForm.input.$error.maxlength">{{ \'MAXLENGTH_ERROR\' | translate:{length:validation.maxLength} }}</br></span>\n                <span ng-show="innerForm.input.$error.minlength">{{ \'MINLENGTH_ERROR\' | translate:{length:validation.minLength} }}</br></span>\n                <span ng-show="innerForm.input.$error.max">{{ \'MAX_ERROR\' | translate:{length:validation.max} }}</br></span>\n                <span ng-show="innerForm.input.$error.min">{{ \'MIN_ERROR\' | translate:{length:validation.min} }}</br></span>\n                <span ng-show="innerForm.input.$error.passwordVerify">{{ \'PASSWORD_NO_MATCH\' | translate }}</br></span>\n            </label>\n        </p>\n    </div>\n</ng-form>'),e.put("zenubu.input/zenubuReset.tpl.html",'<a class="btn btn-primary no-icon" ng-click="reset()"\n   ng-disabled="isSaving() || isPristine() || disabled">\n    <span ng-transclude></span>\n</a>'),e.put("zenubu.input/zenubuSelect.tpl.html",'<div>\n    <div ng-switch="validation.type" ng-class="{\'has-error\' : hasError()}" class="form-group has-feedback">\n        <label ng-if="hasLabel">{{label}}</label>\n        <div ng-switch-when="array">\n            <ui-select ng-model="model[field]"\n                       theme="bootstrap" ng-required="{{validation.required}}">\n                <ui-select-match placeholder="{{ placeholder |translate }}">\n                    {{ $select.selected}}\n                </ui-select-match>\n                <ui-select-choices repeat="item in valueObject | filter: $select.search">\n                    <div ng-bind-html="item | highlight: $select.search"></div>\n                </ui-select-choices>\n            </ui-select>\n        </div>\n\n        <div ng-switch-when="translatableArray">\n            <ui-select ng-model="model[field]"\n                       theme="bootstrap" ng-required="{{validation.required}}">\n                <ui-select-match placeholder="{{ placeholder |translate }}">\n                    {{ translatablePrefix + $select.selected.code | translate}}\n                </ui-select-match>\n                <ui-select-choices repeat="item.code as item in valueObject | filter: $select.search">\n                    <div ng-bind-html=" item.name | highlight: $select.search"></div>\n                </ui-select-choices>\n            </ui-select>\n        </div>\n\n        <span class="select-feedback" ng-if="validation.required" focus-select ng-class="{\'text-danger\' : hasError(), \'has-label\': hasLabel}">\n            <i class="fa fa-fw fa-sort"></i>\n            <i class="fa fa-fw fa-asterisk single-input-feedback"></i>\n        </span>\n\n        <span class="fa fa-fw fa-sort single-input-feedback"\n              ng-class="{\'text-danger\' : hasError()}"\n              ng-if="!validation.required"\n              focus-select></span>\n\n        <div ng-if="hasError()" class="help-block">\n            <label class="control-label">\n                <span>{{ \'REQUIRED_ERROR\' | translate }}</span>\n            </label>\n        </div>\n    </div>\n</div>'),e.put("zenubu.input/zenubuSubmit.tpl.html",'<button type="submit" class="btn btn-primary no-icon"\n        ng-disabled="isSaving() || disabled">\n    <span ng-transclude></span>\n</button>')}]),function(){"use strict";angular.module("zenubu.input").directive("zenubuSubmit",function(){return{restrict:"E",replace:"true",require:"^zenubuForm",scope:{disabled:"="},transclude:!0,templateUrl:"zenubu.input/zenubuSubmit.tpl.html",link:function(e,n,t,i){e.isSaving=function(){return i.isSaving()}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuSelect",function(){return{restrict:"E",replace:!0,require:["^zenubuForm","?^zenubuInputGroup"],scope:{inputModel:"=?model",field:"@",required:"=",placeholder:"@",label:"@",validationObject:"=?",type:"@",translatablePrefix:"@",valueObject:"=",name:"@",value:"@"},templateUrl:"zenubu.input/zenubuSelect.tpl.html",controller:["$scope","$filter","$rootScope",function(e,n,t){if(e.values={},e.validation={type:e.type,required:e.required},"translatableArray"===e.type){var i=[];e.valueObject.forEach(function(e){i.push({code:e,name:e})}),e.valueObject=n("translateAndSortLocalizedObjectArrayByKey")(i,"name",e.translatablePrefix),e.name="name",e.value="code",t.$on("$translateChangeSuccess",function(){e.valueObject=n("translateAndSortLocalizedObjectArrayByKey")(i,"name",e.translatablePrefix)})}e.hasLabel=!!e.label,e.hasError=function(){return e.validation.required&&e.showValidation&&_.isEmpty(e.model[e.field])}}],link:{post:function(e,n,t,i){var a=e.validationObject;i[0].addToCallBacks(function(){e.showValidation=!0}),void 0!==i[1]&&null!==i[1]&&(e.model=e.inputModel||i[1].scope.model,a=a||i[1].scope.validationObject),e.model=e.model||e.inputModel||i[0].scope.model,e.originalValue=e.model[e.field],e.$on("reset",function(){e.model[e.field]=e.originalValue}),a=a||i[0].scope.validationObject,_.isObject(a)&&a.hasOwnProperty(e.field)&&(e.validation=_.defaults(e.validation,a[e.field]))}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuReset",function(){return{restrict:"E",replace:"true",require:"^zenubuForm",scope:{disabled:"="},transclude:!0,templateUrl:"zenubu.input/zenubuReset.tpl.html",link:function(e,n,t,i){e.isSaving=function(){return i.isSaving()},e.isPristine=function(){return i.isPristine()},e.reset=function(){return i.reset()}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuInputGroup",function(){return{restrict:"E",scope:{model:"=?",validationObject:"=?",field:"@?",show:"="},require:"^zenubuForm",controller:["$scope",function(e){this.scope=e}],transclude:!0,template:'<div ng-transclude ng-hide="show"></div>',link:{pre:function(e,n,t,i){var a=i.scope;void 0!==a.model&&a.model.hasOwnProperty(e.field)&&(e.model=e.model||a.model[e.field]),void 0!==a.validationObject&&a.validationObject.hasOwnProperty(e.field)&&(e.validationObject=e.validationObject||a.validationObject[e.field])}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuInput",function(){return{restrict:"E",replace:!0,require:["^zenubuForm","?^zenubuInputGroup"],scope:{inputModel:"=?model",change:"=",field:"@",required:"=",sameAs:"@",placeholder:"@",label:"@",validationObject:"=?",type:"@",max:"=",min:"=",large:"=",maxLength:"=",minLength:"=",regex:"="},templateUrl:"zenubu.input/zenubuInput.tpl.html",controller:["$scope",function(e){e.validation={type:e.type,max:e.max,min:e.min,maxLength:e.maxLength,minLength:e.minLength,required:e.required,regex:e.regex},e.hasLabel=!!e.label,e.hasError=function(){return void 0!==e.innerForm.input&&(e.innerForm.input.$dirty&&e.innerForm.input.$touched||e.showValidation)&&!e.innerForm.input.$valid}}],transclude:!0,link:{post:function(e,n,t,i,a){var r=e.validationObject;i[0].addToCallBacks(function(){e.showValidation=!0}),void 0!==i[1]&&null!==i[1]&&(e.model=e.inputModel||i[1].scope.model,r=r||i[1].scope.validationObject),e.model=e.model||e.inputModel||i[0].scope.model,e.originalValue=e.model[e.field],e.$on("reset",function(){e.model[e.field]=e.originalValue}),r=r||i[0].scope.validationObject,_.isObject(r)&&r.hasOwnProperty(e.field)&&(e.validation=_.defaults(e.validation,r[e.field])),a(e,function(t){_.forEach(t,function(t){angular.element(t).hasClass("prepend")&&(n.children().children().prepend(t),e.inputGroup=!0)})})}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuForm",function(){return{restrict:"E",replace:"true",scope:{submitFunction:"=",model:"=",validationObject:"=?"},controller:["$scope","$timeout",function(e,n){var t=[];this.scope=e;var i=!1;e.submit=function(){if(e.Form.$valid){i=!0;var n=e.submitFunction(e.model);return void(_.isObject(n)&&n.hasOwnProperty("then")&&n.then(function(){e.Form.$setPristine()})["finally"](function(){i=!1}))}i=!1,t.forEach(function(e){e()})},this.reset=function(){e.$parent.$broadcast("reset"),n(function(){e.Form.$setPristine(!0)})},this.addToCallBacks=function(e){return t.push(e)},this.isSaving=function(){return i},this.isPristine=function(){return e.Form.$pristine}}],transclude:!0,templateUrl:"zenubu.input/zenubuForm.tpl.html"}})}(),function(){"use strict";function e(){return{require:"ngModel",link:function(e,n,t,i){var a=new RegExp(t.validatorRegex);i.$validators.validatorRegex=function(e,n){var i=e||n;return _.isString(i)&&_.isString(t.validatorRegex)?a.test(i):!0}}}}angular.module("zenubu.input.validatorRegex",[]).directive("validatorRegex",e)}(),function(){"use strict";function e(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(e,n,t,i){i.$validators.passwordVerify=function(n,t){var i=n||t;return i===e.passwordVerify}}}}angular.module("zenubu.input.passwordVerify",[]).directive("passwordVerify",e)}(),function(){"use strict";angular.module("zenubu.input").directive("focusInput",["$timeout",function(e){return{link:function(n,t){t.bind("click",function(){t.parent().find("input").length>0?e(function(){t.parent().find("input")[0].focus()}):t.parent().find("textarea").length>0&&e(function(){t.parent().find("textarea")[0].focus()})})}}}]).directive("focusSelect",["$timeout",function(e){return{link:function(n,t){t.bind("click",function(){e(function(){angular.element(t.parent().find("button")[0]).scope().$select.activate()})})}}}])}();