!function(){"use strict";angular.module("zenubu.input",["ui.select","zenubu.input.passwordVerify","zenubu.input.validatorRegex"])}(),angular.module("zenubu.input").run(["$templateCache",function(n){n.put("zenubu.input/zenubuForm.tpl.html",'<form name="Form" ng-submit="submit()" novalidate>\n\n    <div ng-transclude></div>\n\n</form>'),n.put("zenubu.input/zenubuInput.tpl.html",'<ng-form name="innerForm">\n    <div ng-class="{\'has-error\' : hasError()}" class="form-group has-feedback">\n        <label ng-if="label">{{label}}</label>\n        <div ng-class="{\'input-group\' : inputGroup}">\n            <input type="{{validation.type}}" class="form-control" name="input" ng-class="{\'input-lg\': large}"\n                   ng-if="!sameAs"\n                   ng-trim="false" ng-model="model[field]"\n                   ng-maxlength="{{validation.maxLength}}" ng-minlength="{{validation.minLength}}"\n                   ng-change="change"\n                   validator-regex="{{validation.regex.pattern}}"\n                   max="{{validation.max}}" min="{{validation.min}}" ng-required="{{validation.required}}"\n                   placeholder="{{ placeholder |translate }}">\n            <input type="{{validation.type}}" class="form-control" name="input"\n                   ng-if="!!sameAs"\n                   ng-change="change"\n                   ng-trim="false" ng-model="model[field]"\n                   password-verify="model[sameAs]"\n                   ng-maxlength="{{validation.maxLength}}" ng-minlength="{{validation.minLength}}"\n                   max="{{validation.max}}" min="{{validation.min}}" ng-required="validation.required"\n                   placeholder="{{ placeholder |translate }}">\n            <span class="fa fa-fw fa-asterisk single-input-feedback" ng-class="{\'text-danger\' : hasError()}"\n                  ng-if="validation.required" focus-input></span>\n        </div>\n        <p ng-if="hasError()" class="help-block">\n            <label class="control-label">\n                <span ng-show="innerForm.input.$error.validatorRegex">{{ validation.regex.error | translate }}</br></span>\n                <span ng-show="innerForm.input.$error.email">{{ \'EMAIL_ERROR\' | translate }}</br></span>\n                <span ng-show="innerForm.input.$error.number">{{ \'NUMBER_ERROR\' | translate }}</br></span>\n                <span ng-show="innerForm.input.$error.required">{{ \'REQUIRED_ERROR\' | translate }}</br></span>\n                <span ng-show="innerForm.input.$error.maxlength">{{ \'MAXLENGTH_ERROR\' | translate:{length:validation.maxLength} }}</br></span>\n                <span ng-show="innerForm.input.$error.minlength">{{ \'MINLENGTH_ERROR\' | translate:{length:validation.minLength} }}</br></span>\n                <span ng-show="innerForm.input.$error.max">{{ \'MAX_ERROR\' | translate:{length:validation.max} }}</br></span>\n                <span ng-show="innerForm.input.$error.min">{{ \'MIN_ERROR\' | translate:{length:validation.min} }}</br></span>\n                <span ng-show="innerForm.input.$error.passwordVerify">{{ \'PASSWORD_NO_MATCH\' | translate }}</br></span>\n            </label>\n        </p>\n    </div>\n</ng-form>'),n.put("zenubu.input/zenubuReset.tpl.html",'<a class="btn btn-primary no-icon" ng-click="reset()"\n   ng-disabled="isSaving() || isPristine() || disabled">\n    <span ng-transclude></span>\n</a>'),n.put("zenubu.input/zenubuSelect.tpl.html",'<div>\n    <div ng-switch="validation.type" ng-class="{\'has-error\' : hasError()}" class="form-group has-feedback">\n\n        <div ng-switch-when="array">\n            <ui-select ng-model="model[field]"\n                       theme="bootstrap" ng-required="{{validation.required}}">\n                <ui-select-match placeholder="{{ placeholder |translate }}">\n                    {{ $select.selected}}\n                </ui-select-match>\n                <ui-select-choices repeat="item in valueObject | filter: $select.search">\n                    <div ng-bind-html="item | highlight: $select.search"></div>\n                </ui-select-choices>\n            </ui-select>\n        </div>\n\n        <div ng-switch-when="translatableArray">\n            <ui-select ng-model="model[field]"\n                       theme="bootstrap" ng-required="{{validation.required}}">\n                <ui-select-match placeholder="{{ placeholder |translate }}">\n                    {{ translatablePrefix + $select.selected.code | translate}}\n                </ui-select-match>\n                <ui-select-choices repeat="item.code as item in valueObject | filter: $select.search">\n                    <div ng-bind-html=" item.name | highlight: $select.search"></div>\n                </ui-select-choices>\n            </ui-select>\n        </div>\n\n        <span class="select-feedback" ng-if="validation.required" focus-select ng-class="{\'text-danger\' : hasError()}">\n            <i class="fa fa-fw fa-sort"></i>\n            <i class="fa fa-fw fa-asterisk single-input-feedback"></i>\n        </span>\n\n        <span class="fa fa-fw fa-sort single-input-feedback"\n              ng-class="{\'text-danger\' : hasError()}"\n              ng-if="!validation.required"\n              focus-select></span>\n\n        <div ng-if="hasError()" class="help-block">\n            <label class="control-label">\n                <span>{{ \'REQUIRED_ERROR\' | translate }}</span>\n            </label>\n        </div>\n    </div>\n</div>'),n.put("zenubu.input/zenubuSubmit.tpl.html",'<button type="submit" class="btn btn-primary no-icon"\n        ng-disabled="isSaving() || disabled">\n    <span ng-transclude></span>\n</button>')}]),function(){"use strict";angular.module("zenubu.input").directive("zenubuSubmit",function(){return{restrict:"E",replace:"true",require:"^zenubuForm",scope:{disabled:"="},transclude:!0,templateUrl:"zenubu.input/zenubuSubmit.tpl.html",link:function(n,e,t,i){n.isSaving=function(){return i.isSaving()}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuSelect",function(){return{restrict:"E",replace:!0,require:["^zenubuForm","?^zenubuInputGroup"],scope:{inputModel:"=?model",field:"@",required:"=",placeholder:"@",validationObject:"=?",type:"@",translatablePrefix:"@",valueObject:"=",name:"@",value:"@"},templateUrl:"zenubu.input/zenubuSelect.tpl.html",controller:["$scope","$filter","$rootScope",function(n,e,t){if(n.values={},n.validation={type:n.type,required:n.required},"translatableArray"===n.type){var i=[];n.valueObject.forEach(function(n){i.push({code:n,name:n})}),n.valueObject=e("translateAndSortLocalizedObjectArrayByKey")(i,"name",n.translatablePrefix),n.name="name",n.value="code",t.$on("$translateChangeSuccess",function(){n.valueObject=e("translateAndSortLocalizedObjectArrayByKey")(i,"name",n.translatablePrefix)})}n.hasError=function(){return n.validation.required&&n.showValidation&&_.isEmpty(n.model[n.field])}}],link:{post:function(n,e,t,i){var a=n.validationObject;i[0].addToCallBacks(function(){n.showValidation=!0}),void 0!==i[1]&&null!==i[1]&&(n.model=n.inputModel||i[1].scope.model,a=a||i[1].scope.validationObject),n.model=n.model||n.inputModel||i[0].scope.model,n.originalValue=n.model[n.field],n.$on("reset",function(){n.model[n.field]=n.originalValue}),a=a||i[0].scope.validationObject,_.isObject(a)&&a.hasOwnProperty(n.field)&&(n.validation=_.defaults(n.validation,a[n.field]))}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuReset",function(){return{restrict:"E",replace:"true",require:"^zenubuForm",scope:{disabled:"="},transclude:!0,templateUrl:"zenubu.input/zenubuReset.tpl.html",link:function(n,e,t,i){n.isSaving=function(){return i.isSaving()},n.isPristine=function(){return i.isPristine()},n.reset=function(){return i.reset()}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuInputGroup",function(){return{restrict:"E",scope:{model:"=?",validationObject:"=?",field:"@?",show:"="},require:"^zenubuForm",controller:["$scope",function(n){this.scope=n}],transclude:!0,template:'<div ng-transclude ng-hide="show"></div>',link:{pre:function(n,e,t,i){var a=i.scope;void 0!==a.model&&a.model.hasOwnProperty(n.field)&&(n.model=n.model||a.model[n.field]),void 0!==a.validationObject&&a.validationObject.hasOwnProperty(n.field)&&(n.validationObject=n.validationObject||a.validationObject[n.field])}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuInput",function(){return{restrict:"E",replace:!0,require:["^zenubuForm","?^zenubuInputGroup"],scope:{inputModel:"=?model",change:"=",field:"@",required:"=",sameAs:"@",placeholder:"@",label:"@",validationObject:"=?",type:"@",max:"=",min:"=",large:"=",maxLength:"=",minLength:"=",regex:"="},templateUrl:"zenubu.input/zenubuInput.tpl.html",controller:["$scope",function(n){n.validation={type:n.type,max:n.max,min:n.min,maxLength:n.maxLength,minLength:n.minLength,required:n.required,regex:n.regex},n.hasError=function(){return void 0!==n.innerForm.input&&(n.innerForm.input.$dirty&&n.innerForm.input.$touched||n.showValidation)&&!n.innerForm.input.$valid}}],transclude:!0,link:{post:function(n,e,t,i,a){var r=n.validationObject;i[0].addToCallBacks(function(){n.showValidation=!0}),void 0!==i[1]&&null!==i[1]&&(n.model=n.inputModel||i[1].scope.model,r=r||i[1].scope.validationObject),n.model=n.model||n.inputModel||i[0].scope.model,n.originalValue=n.model[n.field],n.$on("reset",function(){n.model[n.field]=n.originalValue}),r=r||i[0].scope.validationObject,_.isObject(r)&&r.hasOwnProperty(n.field)&&(n.validation=_.defaults(n.validation,r[n.field])),a(n,function(t){_.forEach(t,function(t){angular.element(t).hasClass("prepend")&&(e.children().children().prepend(t),n.inputGroup=!0)})})}}}})}(),function(){"use strict";angular.module("zenubu.input").directive("zenubuForm",function(){return{restrict:"E",replace:"true",scope:{submitFunction:"=",model:"=",validationObject:"=?"},controller:["$scope","$timeout",function(n,e){var t=[];this.scope=n;var i=!1;n.submit=function(){if(n.Form.$valid){i=!0;var e=n.submitFunction(n.model);return void(_.isObject(e)&&e.hasOwnProperty("then")&&e.then(function(){n.Form.$setPristine()})["finally"](function(){i=!1}))}i=!1,t.forEach(function(n){n()})},this.reset=function(){n.$parent.$broadcast("reset"),e(function(){n.Form.$setPristine(!0)})},this.addToCallBacks=function(n){return t.push(n)},this.isSaving=function(){return i},this.isPristine=function(){return n.Form.$pristine}}],transclude:!0,templateUrl:"zenubu.input/zenubuForm.tpl.html"}})}(),function(){"use strict";function n(){return{require:"ngModel",link:function(n,e,t,i){var a=new RegExp(t.validatorRegex);i.$validators.validatorRegex=function(n,e){var i=n||e;return _.isString(i)&&_.isString(t.validatorRegex)?a.test(i):!0}}}}angular.module("zenubu.input.validatorRegex",[]).directive("validatorRegex",n)}(),function(){"use strict";function n(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(n,e,t,i){i.$validators.passwordVerify=function(e,t){var i=e||t;return i===n.passwordVerify}}}}angular.module("zenubu.input.passwordVerify",[]).directive("passwordVerify",n)}(),function(){"use strict";angular.module("zenubu.input").directive("focusInput",["$timeout",function(n){return{link:function(e,t){t.bind("click",function(){t.parent().find("input").length>0?n(function(){t.parent().find("input")[0].focus()}):t.parent().find("textarea").length>0&&n(function(){t.parent().find("textarea")[0].focus()})})}}}]).directive("focusSelect",["$timeout",function(n){return{link:function(e,t){t.bind("click",function(){n(function(){angular.element(t.parent().find("button")[0]).scope().$select.activate()})})}}}])}();